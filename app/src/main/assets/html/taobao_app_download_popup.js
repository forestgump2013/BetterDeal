KISSY.add("mui/app-download-popup/index",function(t,e,a,n,i,o,s){var l=document;var u=new Date;var p=[u.getFullYear(),u.getMonth()+1,u.getDate()].join("-");var r=window.localStorage;var _=['<div class="app-download-popup" data-spm="app-download-popup">','<div class="app-download-popup-inner">','<i class="btn-close"></i>','<img class="banner">','<div class="btn-wrapper">','<a class="btn-download"></a>',"</div>",'<div class="btn-wrapper">','<button class="btn-hide"></button>',"</div>","</div>","</div>"];var d={banner:function(t,e){t.el.all("img.banner").attr("src",e)},bg_img:function(t,e){t.el.all(".app-download-popup-inner").css("background-image",'url("'+e+'")')},download_text:function(t,e){t.el.all(".btn-download").text(e)},continue_text:function(t,e){t.el.all(".btn-hide").text(e)},is_small:function(t,e){t.el[a.parseBoolean(e)?"addClass":"removeClass"]("smally")},download_url:function(t,e){t.el.all(".btn-download").attr("href",e)}};var c={download_url:"//www.tmall.com/wow/portal/act/app-download",invoke_fatigue:-1,popup_fatigue:-1,download_text:"\u7acb\u5373\u4e0b\u8f7d",continue_text:"\u7ee7\u7eed\u6d4f\u89c8",is_small:false,bg_img:"",banner:"",tk_ua_list_unpopup:"",tk_ua_list_popup:"",tk_ua_list_uninvoke:"",tk_ua_list_invoke:"",tk_ua_other_invoke:false,tk_ua_other_popup:false,ua_list_unpopup:"",ua_list_popup:"",ua_list_uninvoke:"",ua_list_invoke:"",ua_other_invoke:false,ua_other_popup:false,continue_callback:null};function m(t){t.preventDefault()}function f(e){this.el=t.one(_.join(""))}t.mix(f.prototype,{init:function(n){var i=this;n=i.opts=t.merge(c,n||{});t.each(d,function(e,a){if(!t.isUndefined(n[a])){e(i,n[a])}});t.one("body").append(i.el);s.on(i.el.all(".btn-download"),"tap",function(){i.download()});s.on(i.el.all(".btn-hide"),"click",function(){i.hide()});s.on(i.el.all(".btn-close"),"click",function(){i.hide()});var o=i.el.one(".app-download-popup-inner")[0];s.on(i.el,"touchmove",function(t){if(o.scrollHeight<=o.clientHeight){t.preventDefault()}});var l=false,u=false;if(e.isAliTrack){if(a.isMatchUA(e.ua,n.tk_ua_list_unpopup)){l=false}else if(a.isMatchUA(e.ua,n.tk_ua_list_popup)){l=true}else{l=a.parseBoolean(n.tk_ua_other_popup)}if(a.isMatchUA(e.ua,n.tk_ua_list_uninvoke)){u=false}else if(a.isMatchUA(e.ua,n.tk_ua_list_invoke)){u=true}else{u=a.parseBoolean(n.tk_ua_other_invoke)}}else{if(a.isMatchUA(e.ua,n.ua_list_unpopup)){l=false}else if(a.isMatchUA(e.ua,n.ua_list_popup)){l=true}else{l=a.parseBoolean(n.ua_other_popup)}if(a.isMatchUA(e.ua,n.ua_list_uninvoke)){u=false}else if(a.isMatchUA(e.ua,n.ua_list_invoke)){u=true}else{u=a.parseBoolean(n.ua_other_invoke)}}l&&i.show();u&&i.invoke()},otpion:function(t,e){if(arguments.length===1){return this.opts[t]}d[t]&&d[t](this,e)},popupFatigue:function(t){if(!r){return 0}if(arguments.length){r.setItem("_APP_DOWNLOAD_POPUP_POPUP_FATIGUE_"+p,t)}else{return parseInt(r.getItem("_APP_DOWNLOAD_POPUP_POPUP_FATIGUE_"+p))||0}},invokeFatigue:function(t){if(!r){return 0}if(arguments.length){r.setItem("_APP_DOWNLOAD_POPUP_INVOKE_FATIGUE_"+p,t)}else{return parseInt(r.getItem("_APP_DOWNLOAD_POPUP_INVOKE_FATIGUE_"+p))||0}},show:function(){var t=this.opts,e=parseInt(t.popup_fatigue)||0,n=this.popupFatigue();if(e===-1||e>n){this.el.addClass("show");a.mmstat("tmallacti.1003.1219.1",t.mmstat);this.popupFatigue(n+1)}return this},invoke:function(){var t=this.opts,e=parseInt(t.invoke_fatigue)||0,a=this.invokeFatigue();if(e===-1||e>a){var i={utskA:"4",type:t.type,params:t.params,notGoDownload:true,notNeedUI:true,mmstat:t.mmstat,fail:function(){}};var o=new n(i);o.appJump(i);this.invokeFatigue(a+1)}return this},download:function(){a.mmstat("tmallacti.1003.1219.2",this.opts.mmstat);return this},hide:function(){this.el.hide();a.mmstat("tmallacti.1003.1219.3",this.opts.mmstat);this.opts.continue_callback&&this.opts.continue_callback();return this},close:function(){this.el.hide();a.mmstat("tmallacti.1003.1219.4",this.opts.mmstat);return this},destroy:function(){this.el&&this.el.remove();this.el=null}});return f},{requires:["mui/app-download-popup/env","mui/app-download-popup/util","mui/smartbanner/index","io","node","event","mui/app-download-popup/index.css"]});KISSY.add("mui/app-download-popup/env",function(i,a){var e=window;var n=document;var r=e.navigator.userAgent;var t=a.os;var s=i.unparam(e.location.search.replace("?",""));return{ua:r,mmstat:s.mmstat,isIOS:t.name==="ios",isAndroid:t.name==="android",isAliTrack:"ali_trackid"in s,isBC:/AliApp\(BC/.test(r),isAli:/AliApp\(/.test(r)&&!isBC}},{requires:["mui/tengine-detector/index"]});KISSY.add("mui/tengine-detector/index",function(e,a){var o=e;var t=[{name:"$detector_type",defaultValue:"pc",greedyValue:["android"],ruleValue:{" pad":"tablet","-pad":"tablet",tablet:"tablet",ipad:"tablet",kindle:"tablet",armbjs:"tablet","hp slatebook 10":"tablet","slate 21":"tablet",transformer:"tablet",playbook:"tablet","rim tablet":"tablet",htc_flyer_p512:"tablet","tc flyer":"tablet",xoom:"tablet",ideatab:"tablet",ideapad:"tablet",mediapad:"tablet",touchpad:"tablet","hm note 1w":"tablet",sholest:"tablet","silk-accelerated":"tablet","-pd/":"tablet","gt-n5100":"tablet","gt-n5110":"tablet","gt-n8000":"tablet","gt-n8010":"tablet","gt-p3100":"tablet","gt-p6800":"tablet","gt-p5110":"tablet","gt-p5210":"tablet","lenovo a3000":"tablet","lg-v500":"tablet","nexus 7":"tablet","p98 3g":"tablet",ramosi9:"tablet","sm-p600":"tablet","sm-p601":"tablet","sm-t110":"tablet","sm-t210":"tablet","sm-t211":"tablet","sm-t310":"tablet","sm-t311":"tablet","sm-t320":"tablet","sm-t321":"tablet","sm-t520":"tablet","sm-t700":"tablet","sm-t705":"tablet","sm-t800":"tablet","sm-t805":"tablet",v703:"tablet",v719:"tablet",v819:"tablet",v919:"tablet","x98 3g":"tablet","venue 7":"tablet",android:"phone","mobile ":"phone","aliapp(":"phone",tizen:"phone",iphone:"phone",iph:"phone",ipod:"phone",symbianos:"phone","windows ce":"phone","windows phone":"phone",meizu:"phone",_td:"phone",cucc:"phone",series60:"phone","windows mobile":"phone","opera mobi":"phone","opera mini":"phone",blackberry:"phone"," bb":"phone",sonyericsson:"phone",moto:"phone",j2me:"phone","samsung sm-z130h":"phone"}},{name:"$detector_app",defaultValue:"NA",greedyValue:["aliapp"],ruleValue:{weibo:"weibo","aliapp(dingtalk":"dingtalk","aliapp(lw":"lw","aliapp(et":"et","aliapp(dd":"dd","aliapp(tb":"tb","aliapp(tb-pd":"tb-pd","aliapp(tm":"tm","aliapp(tm-pd":"tm-pd","aliapp(am":"am","aliapp(ae":"ae","aliapp(lx":"lx","aliapp(ju":"ju","aliapp(ap":"ap","aliapp(fm":"fm","aliapp(wx":"wx","aliapp(xm":"xm","aliapp(qn":"qn","aliapp(cp":"cp","aliapp(ea":"ea","aliapp(1688":"1688"}},{name:"$detector_browser",defaultValue:"NA",greedyValue:["trident","ipad","safari","version","chrome"],ruleValue:{edge:"edge",trident:"ie",iemobile:"ie_mobile","ie ":"ie","rv ":"ie","rv:":"ie"," uc":"uc",theworld:"TheWorld",ucbrowser:"uc",dolfin:"Dolfin",opera:"opera",oupeng:"opera",firefox:"ff",micromessenger:"wechat",taobrowser:"TaoBrowser",mqqbrowser:"MQQBrowser",baiduhd:"BaiduHD",maxthon:"maxthon",yabrowser:"yandex",mxbrowser:"maxthon",flyflow:"FlyFlow",windvane:"WindVane",qt:"Qt"," ubrowser":"UBrowser",phantomjs:"PhantomJS",baidubrowser:"baidu"," lebrowser":"LeBrowser",miuibrowser:"MiuiBrowser",bidubrowser:"BIDUBrowser",nokiabrowser:"nokia",blackberry:"blackberry",rim:"blackberry"," bb10 ":"blackberry","se ":"sougou",sogoumse:"sougou",sogoumobilebrowser:"sougou","360 aphone browser":"360","360se":"360","360ee":"360","360chrome":"360","360browser":"360",lbbrowser:"liebao",liebaofast:"liebao",liebao:"liebao",qqbrowser:"QQBrowser",tencenttraveler:"tt",greenbrowser:"green",chrome:"chrome","crios/":"chrome"," android ":"android_webkit"," android/":"android_webkit",";android ":"android_webkit","ipad os":"ipad_safari","cpu os":"safari","cpu iphone os":"safari",version:"safari"}},{name:"$detector_engine",defaultValue:"NA",greedyValue:["gecko"],ruleValue:{"rv ":"trident","rv:":"trident","msie ":"trident"," ie ":"trident","(ie ":"trident",applewebkit:"webkit","gecko/":"gecko",presto:"presto",androidwebkit:"androidwebkit",coolpadwebkit:"coolpadwebkit"," u2/":"u2"," u3/":"u3",alireactnative:"reactnative"}},{name:"$detector_os",defaultValue:"NA",greedyValue:["mac"],ruleValue:{"windows nt":"windows",win32:"windows","windows ce":"wp",xblwp:"wp",zunewp:"wp","windows phone os":"wp","windows phone":"wp","windows nt 6.2; arm;":"wp","windows nt 6.3; arm;":"wp",xblwp7:"wp",zunewp7:"wp",windows:"windows","macintosh; intel mac os x":"macos","macintosh; u; intel mac os x;":"macos","macintosh; amd mac os x":"macos","android ":"android",";android":"android"," android/":"android"," adr":"android","iphone os":"ios","cpu os":"ios","iph os":"ios",ipod:"ios"," ios ":"ios",webos:"webos",aliyunos:"yunos",symbian:"symbian","cros i686 ":"chromeos",hpwos:"webos",linux:"linux"," x11":"linux",blackberry:"blackberry",rim:"blackberry",bb10:"blackberry",nuhk:"robot","googlebot/":"robot","googlebot-image":"robot",yammybot:"robot",openbot:"robot",slurp:"robot",msnbot:"robot","ask jeeves/teoma":"robot",ia_archiver:"robot",baiduspider:"robot","bingbot/":"robot"}},{name:"$detector_device",defaultValue:"NA",greedyValue:["micromessenger"],ruleValue:{"intel mac os x":"mac",samsung:"samsung","gt-":"samsung","sgh-":"samsung","sm-":"samsung","sch-":"samsung"," mi-":"xiaomi"," mi ":"xiaomi"," mt":"sonyericsson"," hm":"hongmi",aliyunos:"aliyunos"," mx1":"meizu"," mx2":"meizu"," mx3":"meizu"," mx4":"meizu"," m040":"meizu"," m030":"meizu",meizu:"meizu",huawei:"huawei","zte-":"zte","-zte":"zte",zteu:"zte"," zte ":"zte",lenovo:"lenovo",coolpad:"coolpad",silk:"amazon",vivo:"vivo",oppo:"oppo",konka:"konka",iphone:"iphone",ipod:"iphone",iph:"iphone",ipad:"ipad",nokia:"nokia",noain:"noain","nexus ":"nexus",htc:"htc"," lg":"lg",blackberry:"blackberry",rim:"blackberry"," bb10 ":"blackberry","dell ":"dell",motorola:"motorola",droidx:"motorola","droid bionic":"motorola",xoom:"motorola",sonyst:"sony",sonylt:"sony",sonyericsson:"sony",smartisan:"smartisan"}}];var r={device:{name:"$detector_device",type:"$detector_type"},os:{name:"$detector_os",version:"$detector_os_version"},browser:{name:"$detector_browser",version:"$detector_browser_version"},engine:{name:"$detector_engine",version:"$detector_engine_version"},app:{name:"$detector_app",version:"$detector_app_version"}};o.detect=function(e){e=e||{};e.ua=e.ua||"";var a=e.ua.toLowerCase();var o={};for(var r=0;r<t.length;r++){var i=t[r].name.replace("$detector_","");var n=o[i]={};var l;var s=l=-1;var b="";for(var p=0;p<t[r].greedyValue.length;p++){var d=t[r].greedyValue[p];s=a.indexOf(d);if(s!==-1){if(l===-1){l=s;b=d}else if(l>s){l=s;b=d}}}var m;var c=m=-1;var u="";var w="";var h="";for(var g in t[r].ruleValue){if(t[r].greedyValue.indexOf(g)<0){c=a.lastIndexOf(g);if(m<=c&&c>=0){if(m===c&&h.length>g.length){}else{m=c;h=g;u=t[r].ruleValue[g];w=g}}}}var v=0;if(l>-1){if(m>-1){v=m;n.name=u;n.match=w}else{v=l;n.name=t[r].ruleValue[b]||b;n.match=b}}else{v=m;n.name=u;n.match=w}if(i!=="type"&&n.name){var y=a.substr(v+n.match.length);var f=/^[\/|\s]*?(\d+[\w|\.|_|-]+)[)|;|\s]*/;var k=f.exec(y);if(k){n.version=k[1].replace(/_/g,".")}else{n.version=""}}if(!n.name){n.name=t[r].defaultValue;n.version=""}}o.device.type=o.type.name;delete o.device.version;delete o.browser.match;delete o.os.match;delete o.app.match;delete o.engine.match;delete o.device.match;delete o.type.match;return o};var i=e.Cookie.get("_med");return e.detect({ua:navigator.userAgent,med:i})},{requires:["cookie"]});KISSY.add("mui/app-download-popup/util",function(e){return{isMatchUA:function(t,a){var n=(a||"").split("|");return e.some(n,function(a){a=e.trim(a);return a&&t.indexOf(a)!==-1})},parseBoolean:function(e){var t=false;try{t=JSON.parse(e)}catch(a){}return t},mmstat:function(t,a){if(t){var n=new Image;n.src="//gm.mmstat.com/"+t+"?mmstat="+a+"&t="+e.now()}}}});